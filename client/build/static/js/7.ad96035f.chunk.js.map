{"version":3,"sources":["MUI/CssComponents.tsx","hooks/message.hook.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","graphql/mutations/updateUser.ts","Pages/Profile/Settings.tsx"],"names":["CssTextField","withStyles","root","color","fontWeight","fontSize","height","borderRadius","borderColor","TextField","SearchTextField","boxShadow","theme","width","padding","display","switchBase","transform","opacity","backgroundColor","thumb","track","border","checked","Switch","settings","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","useMessage","useCallback","text","type","toast","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","UPDATE_USER_MUTATION","gql","Settings","setShowNav","useContext","BottomNavContext","useEffect","useState","name","surname","phone","email","password","password_repeat","form","setForm","user","UserContext","history","useHistory","message","useMutation","variables","update","cache","data","writeQuery","query","ME_QUERY","me","updateUser","loading","error","handleChange","e","value","handleSumbmit","a","preventDefault","style","marginBottom","onClick","goBack","lineHeight","marginTop","onSubmit","onChange","variant","size","label","placeholder","fullWidth","disabled","className","localStorage","removeItem","go"],"mappings":"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","file":"static/js/7.ad96035f.chunk.js","sourcesContent":["import { TextField, withStyles, Switch } from \"@material-ui/core\";\r\n\r\nexport const CssTextField = withStyles({\r\n  root: {\r\n    \"& label\": {\r\n      color: \"#C0C0C0\",\r\n    },\r\n    \"& label.Mui-focused\": {\r\n      color: \"#5B5B5B\",\r\n      fontWeight: 500,\r\n    },\r\n    \"& label.Mui-error\": {\r\n      color: \"#F44336\",\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      \"& input\": {\r\n        color: \"#C0C0C0\",\r\n        fontWeight: 500,\r\n        fontSize: 12,\r\n        height: 19,\r\n      },\r\n      \"& input:focus\": {\r\n        color: \"#000000\",\r\n        fontWeight: 500,\r\n        fontSize: 12,\r\n      },\r\n      \"&.Mui-error input\": {\r\n        color: \"#F44336\",\r\n      },\r\n      \"& fieldset\": {\r\n        borderRadius: 5,\r\n        borderColor: \"#D4D4D4\",\r\n      },\r\n      \"&:hover fieldset\": {\r\n        borderColor: \"#5B5B5B\",\r\n      },\r\n      \"&.Mui-focused fieldset\": {\r\n        borderColor: \"#5B5B5B\",\r\n      },\r\n      \"&.Mui-error fieldset\": {\r\n        borderColor: \"#F44336\",\r\n      },\r\n    },\r\n  },\r\n})(TextField);\r\n\r\nexport const SearchTextField = withStyles({\r\n  root: {\r\n    \"& .MuiOutlinedInput-root\": {\r\n      \"& input\": {\r\n        fontWeight: 400,\r\n      },\r\n      \"& fieldset\": {\r\n        color: \"#000000\",\r\n        fontWeight: 400,\r\n        borderRadius: 7,\r\n        borderColor: \"transparent\",\r\n        boxShadow: \"0px 4px 15px rgba(0, 0, 0, 0.12)\",\r\n      },\r\n      \"&.Mui-focused fieldset\": {\r\n        borderColor: \"transparent\",\r\n      },\r\n    },\r\n  },\r\n})(TextField);\r\n\r\nexport const CssSwitch = withStyles((theme) => ({\r\n  root: {\r\n    width: 60,\r\n    height: 33,\r\n    padding: 2,\r\n    display: \"flex\",\r\n  },\r\n  switchBase: {\r\n    padding: 5,\r\n    color: \"#FFFFFF\",\r\n    \"&$checked\": {\r\n      transform: \"translateX(28px)\",\r\n      color: \"#215BA5\",\r\n      \"& + $track\": {\r\n        opacity: 1,\r\n        backgroundColor: \"#F1F2F6\",\r\n        borderColor: \"#F1F2F6\",\r\n      },\r\n    },\r\n  },\r\n  thumb: {\r\n    width: 23,\r\n    height: 23,\r\n    boxShadow: \"none\",\r\n  },\r\n  track: {\r\n    border: 0,\r\n    borderRadius: 16,\r\n    backgroundColor: \"#F1F2F6\",\r\n  },\r\n  checked: {},\r\n}))(Switch);\r\n","import { useCallback } from \"react\";\r\nimport { toast, ToastOptions } from \"react-toastify\";\r\n\r\ntype TMessage = {\r\n  text: string;\r\n  type: \"success\" | \"error\";\r\n};\r\n\r\nconst settings: ToastOptions = {\r\n  position: \"bottom-center\",\r\n  autoClose: 5000,\r\n  hideProgressBar: true,\r\n  closeOnClick: true,\r\n  pauseOnHover: true,\r\n  draggable: true,\r\n  progress: undefined,\r\n};\r\n\r\nexport const useMessage = () =>\r\n  useCallback(({ text, type }: TMessage) => toast[type](text, settings), []);\r\n","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import { DocumentNode, gql } from \"@apollo/client\";\r\n\r\nconst UPDATE_USER_MUTATION: DocumentNode = gql`\r\n  mutation updateUser($form: IUpdate!) {\r\n    updateUser(form: $form) {\r\n      id\r\n      name\r\n      surname\r\n      phone\r\n    }\r\n  }\r\n`;\r\n\r\nexport default UPDATE_USER_MUTATION;\r\n","// @ts-nocheck\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { BottomNavContext } from \"../../context/BottomNavContext\";\r\n\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport UPDATE_USER_MUTATION from \"../../graphql/mutations/updateUser\";\r\nimport ME_QUERY from \"../../graphql/queries/me\";\r\n\r\nimport { BackArrow } from \"../../Icons\";\r\nimport { CssTextField } from \"../../MUI/CssComponents\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport { useMessage } from \"../../hooks/message.hook\";\r\n\r\ntype TForm = {\r\n  name: string | undefined;\r\n  surname: string | undefined;\r\n  phone: string | undefined;\r\n  email: string | undefined;\r\n  password: string | undefined;\r\n  password_repeat: string | undefined;\r\n};\r\n\r\nconst Settings: React.FC = () => {\r\n  const { setShowNav } = useContext(BottomNavContext);\r\n\r\n  useEffect(() => {\r\n    setShowNav(true);\r\n  }, [setShowNav]);\r\n\r\n  const [form, setForm] = useState<TForm>({\r\n    name: undefined,\r\n    surname: undefined,\r\n    phone: undefined,\r\n    email: undefined,\r\n    password: undefined,\r\n    password_repeat: undefined,\r\n  });\r\n\r\n  const user = useContext(UserContext);\r\n  const history = useHistory();\r\n  const message = useMessage();\r\n\r\n  const [update, { data, loading, error }] = useMutation(UPDATE_USER_MUTATION, {\r\n    variables: { form: (({ password_repeat, ...rest }) => rest)(form) },\r\n    update: (cache, { data }) => {\r\n      cache.writeQuery({\r\n        query: ME_QUERY,\r\n        data: { me: data.updateUser },\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (error) message({ text: error.message, type: \"error\" });\r\n  }, [error, message]);\r\n\r\n  useEffect(() => {\r\n    if (data && data.updateUser)\r\n      message({ text: \"Пользователь обновлён!\", type: \"success\" });\r\n  }, [data, message]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.value.length === 0)\r\n      setForm({ ...form, [e.target.name]: undefined });\r\n    else setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSumbmit = async (e: React.SyntheticEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (form.password !== undefined) {\r\n      if (form.password.length < 6)\r\n        return message({ text: \"Пароль слишком короткий!\", type: \"error\" });\r\n      if (form.password !== form.password_repeat)\r\n        return message({ text: \"Пароли не совпадают!\", type: \"error\" });\r\n    }\r\n    update();\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    history.go(0);\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 20, marginBottom: 70 }}>\r\n      <div onClick={() => history.goBack()}>\r\n        <BackArrow />\r\n      </div>\r\n\r\n      <p\r\n        style={{\r\n          fontWeight: 700,\r\n          fontSize: 30,\r\n          lineHeight: \"36.57px\",\r\n          marginTop: 15,\r\n          color: \"#343434\",\r\n        }}\r\n      >\r\n        Настройки\r\n      </p>\r\n\r\n      <p\r\n        style={{\r\n          fontWeight: 600,\r\n          fontSize: 14,\r\n          lineHeight: \"23.8px\",\r\n          color: \"#5B5B5B\",\r\n          marginTop: 4,\r\n        }}\r\n      >\r\n        Изменяйте настройки вашего профиля\r\n      </p>\r\n\r\n      <form onSubmit={handleSumbmit} style={{ marginTop: 20 }}>\r\n        <CssTextField\r\n          name=\"name\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Имя\"\r\n          placeholder={user?.name}\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n        <CssTextField\r\n          name=\"surname\"\r\n          value={form.surname}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Фамилия\"\r\n          placeholder={user?.surname}\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n        <CssTextField\r\n          name=\"phone\"\r\n          value={form.phone}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Мобильный телефон\"\r\n          placeholder={user?.phone}\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n        <CssTextField\r\n          name=\"email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Эл. Почта\"\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n        <CssTextField\r\n          name=\"password\"\r\n          value={form.password}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Пароль\"\r\n          type=\"password\"\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n        <CssTextField\r\n          name=\"password_repeat\"\r\n          value={form.password_repeat}\r\n          onChange={handleChange}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          label=\"Пароль еще раз\"\r\n          type=\"password\"\r\n          fullWidth\r\n          style={{ marginBottom: 10 }}\r\n        />\r\n\r\n        <button\r\n          disabled={loading}\r\n          type=\"submit\"\r\n          className=\"btn btn-shadow\"\r\n          style={{ marginTop: 5 }}\r\n        >\r\n          Сохранить изменения\r\n        </button>\r\n      </form>\r\n      <button\r\n        className=\"btn btn-shadow btn-outlined\"\r\n        style={{ marginTop: 14 }}\r\n        onClick={logout}\r\n      >\r\n        Выйти из аккаунта\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"],"sourceRoot":""}