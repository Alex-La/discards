{"version":3,"sources":["MUI/CssComponents.tsx","graphql/mutations/login.ts","hooks/message.hook.ts","Pages/Login.tsx"],"names":["CssTextField","withStyles","root","color","fontWeight","fontSize","height","borderRadius","borderColor","TextField","boxShadow","theme","width","padding","display","switchBase","transform","opacity","backgroundColor","thumb","track","border","checked","Switch","LOGIN_MUTATION","gql","settings","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","useMessage","useCallback","text","type","toast","Login","message","useState","email","password","form","setForm","useMutation","errorPolicy","variables","update","cache","data","login","token","user","localStorage","setItem","writeQuery","query","ME_QUERY","me","error","loading","useEffect","handleChange","e","target","name","value","className","src","Logo","alt","onSubmit","preventDefault","onChange","size","label","variant","fullWidth","style","marginTop","disabled","to"],"mappings":"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","file":"static/js/8.542dec3d.chunk.js","sourcesContent":["import { TextField, withStyles, Switch } from \"@material-ui/core\";\r\n\r\nexport const CssTextField = withStyles({\r\n  root: {\r\n    \"& label\": {\r\n      color: \"#C0C0C0\",\r\n    },\r\n    \"& label.Mui-focused\": {\r\n      color: \"#5B5B5B\",\r\n      fontWeight: 500,\r\n    },\r\n    \"& label.Mui-error\": {\r\n      color: \"#F44336\",\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      \"& input\": {\r\n        color: \"#C0C0C0\",\r\n        fontWeight: 500,\r\n        fontSize: 12,\r\n        height: 19,\r\n      },\r\n      \"& input:focus\": {\r\n        color: \"#000000\",\r\n        fontWeight: 500,\r\n        fontSize: 12,\r\n      },\r\n      \"&.Mui-error input\": {\r\n        color: \"#F44336\",\r\n      },\r\n      \"& fieldset\": {\r\n        borderRadius: 5,\r\n        borderColor: \"#D4D4D4\",\r\n      },\r\n      \"&:hover fieldset\": {\r\n        borderColor: \"#5B5B5B\",\r\n      },\r\n      \"&.Mui-focused fieldset\": {\r\n        borderColor: \"#5B5B5B\",\r\n      },\r\n      \"&.Mui-error fieldset\": {\r\n        borderColor: \"#F44336\",\r\n      },\r\n    },\r\n  },\r\n})(TextField);\r\n\r\nexport const SearchTextField = withStyles({\r\n  root: {\r\n    \"& .MuiOutlinedInput-root\": {\r\n      \"& input\": {\r\n        fontWeight: 400,\r\n      },\r\n      \"& fieldset\": {\r\n        color: \"#000000\",\r\n        fontWeight: 400,\r\n        borderRadius: 7,\r\n        borderColor: \"transparent\",\r\n        boxShadow: \"0px 4px 15px rgba(0, 0, 0, 0.12)\",\r\n      },\r\n      \"&.Mui-focused fieldset\": {\r\n        borderColor: \"transparent\",\r\n      },\r\n    },\r\n  },\r\n})(TextField);\r\n\r\nexport const CssSwitch = withStyles((theme) => ({\r\n  root: {\r\n    width: 60,\r\n    height: 33,\r\n    padding: 2,\r\n    display: \"flex\",\r\n  },\r\n  switchBase: {\r\n    padding: 5,\r\n    color: \"#FFFFFF\",\r\n    \"&$checked\": {\r\n      transform: \"translateX(28px)\",\r\n      color: \"#215BA5\",\r\n      \"& + $track\": {\r\n        opacity: 1,\r\n        backgroundColor: \"#F1F2F6\",\r\n        borderColor: \"#F1F2F6\",\r\n      },\r\n    },\r\n  },\r\n  thumb: {\r\n    width: 23,\r\n    height: 23,\r\n    boxShadow: \"none\",\r\n  },\r\n  track: {\r\n    border: 0,\r\n    borderRadius: 16,\r\n    backgroundColor: \"#F1F2F6\",\r\n  },\r\n  checked: {},\r\n}))(Switch);\r\n","import { DocumentNode, gql } from \"@apollo/client\";\r\n\r\nconst LOGIN_MUTATION: DocumentNode = gql`\r\n  mutation login($form: IUser!) {\r\n    login(form: $form) {\r\n      token\r\n      user {\r\n        id\r\n        name\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default LOGIN_MUTATION;\r\n","import { useCallback } from \"react\";\r\nimport { toast, ToastOptions } from \"react-toastify\";\r\n\r\ntype TMessage = {\r\n  text: String;\r\n  type: \"success\" | \"error\";\r\n};\r\n\r\nconst settings: ToastOptions = {\r\n  position: \"bottom-center\",\r\n  autoClose: 5000,\r\n  hideProgressBar: true,\r\n  closeOnClick: true,\r\n  pauseOnHover: true,\r\n  draggable: true,\r\n  progress: undefined,\r\n};\r\n\r\nexport const useMessage = () =>\r\n  useCallback(({ text, type }: TMessage) => toast[type](text, settings), []);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport Logo from \"../assets/logo.svg\";\r\nimport { CssTextField } from \"../MUI/CssComponents\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport LOGIN_MUTATION from \"../graphql/mutations/login\";\r\nimport ME_QUERY from \"../graphql/queries/me\";\r\n\r\nimport { useMessage } from \"../hooks/message.hook\";\r\n\r\ntype TForm = {\r\n  email: String;\r\n  password: String;\r\n};\r\n\r\nconst Login: React.FC = () => {\r\n  const message = useMessage();\r\n\r\n  const [form, setForm] = useState<TForm>({ email: \"\", password: \"\" });\r\n\r\n  const [login, { error, loading }] = useMutation(LOGIN_MUTATION, {\r\n    errorPolicy: \"all\",\r\n    variables: { form },\r\n    update: (cache, { data }) => {\r\n      const { token, user } = data.login || {};\r\n      localStorage.setItem(\"token\", token);\r\n      cache.writeQuery({\r\n        query: ME_QUERY,\r\n        data: { me: user },\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (error) message({ text: error.message, type: \"error\" });\r\n  }, [error, message]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    login();\r\n  };\r\n\r\n  return (\r\n    <div className=\"center-wrapper\">\r\n      <div className=\"wrap\">\r\n        <img src={Logo} alt=\"logo\" width={200} />\r\n        <p className=\"subtitle\">Войти</p>\r\n        <form onSubmit={handleSubmit}>\r\n          <CssTextField\r\n            onChange={handleChange}\r\n            value={form.email}\r\n            name=\"email\"\r\n            size=\"small\"\r\n            label=\"Эл. почта\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          />\r\n          <CssTextField\r\n            onChange={handleChange}\r\n            value={form.password}\r\n            name=\"password\"\r\n            size=\"small\"\r\n            label=\"Пароль\"\r\n            variant=\"outlined\"\r\n            type=\"password\"\r\n            fullWidth\r\n            style={{ marginTop: 11 }}\r\n          />\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            style={{ marginTop: 15 }}\r\n            className=\"btn btn-shadow\"\r\n          >\r\n            Войти\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"bottom-link\">\r\n          Или <NavLink to=\"/registration\">зарегистрируйтесь</NavLink>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}